# Code snippets
Just general code snippets I find useful in an engagement but hard to remember :)


### ssh socks4/socks5 forwarding
` # ssh -D 1081 [remote server] `

### configure tsocks for ssh socks
# change "server = 192.xx.xx.xx" to localhost in /etc/tsocks.conf
# change "server_type = 5" to 4, same file.


### Apt through proxy
Especially useful if don't have tsocks in stalled.
- Set up your SSH proxy
    - ` # ssh -D 1081 [ip] `
- Set up apt 12proxy file:
    - ` # echo 'Acuire::http::proxy "socks5h://127.0.0.1:1081";' > /etc/apt/apt.conf.d/12proxy `
- Keep using it this way if all you need it apt, or install and use tsocks for pip/other stuff.
- Possible port conflict: ntlmrelayx with socks or other tools using 1081.

### Apt or pip through tsocks
1. Must have ssh socks4/socks5 forwarding
2. tsocks msut be configured

- ` # tsocks apt install whatever `
- OR
- ` #. tsocks on `
- ` # apt install whatever `
- ` # pip install stuff `
- ` #. tsocks off `

- If you have SSL issues you may need to append to your pip command: 
    - `--proxy socks4:127.0.0.1:1081 --trusted-host pypi.org --trusted-host files.pythonhosted.org`

### Add service to systemd
- Copy local file:
` sudo cp file.service /etc/systemd/system `
- Start service
` sudo systemctl start file.servce `
- Enable service for future boots
` sudo systemctl enable file.service `
